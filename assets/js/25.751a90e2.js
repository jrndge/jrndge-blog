(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{390:function(a,e,r){"use strict";r.r(e);var s=r(7),t=Object(s.a)({},(function(){var a=this,e=a._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h2",{attrs:{id:"后端"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#后端"}},[a._v("#")]),a._v(" 后端")]),a._v(" "),e("p",[a._v("使用docker运行后端服务")]),a._v(" "),e("p",[a._v("先在docker中创建一个MySQL的数据库")]),a._v(" "),e("p",[e("code",[a._v("docker run -d --name mysql_for_mineadmin --restart=always -p 3309:3306 -e MYSQL_USER='ComplexUser123' -e MYSQL_PASSWORD='G7h#9kLmP2@x' -e MYSQL_ROOT_PASSWORD='RootPass#8kLmP2@x' mysql:5.7")])]),a._v(" "),e("h3",{attrs:{id:"原来成功的脚本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#原来成功的脚本"}},[a._v("#")]),a._v(" 原来成功的脚本")]),a._v(" "),e("h4",{attrs:{id:"成功安装一个congyou项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#成功安装一个congyou项目"}},[a._v("#")]),a._v(" 成功安装一个congyou项目")]),a._v(" "),e("p",[a._v("docker run  --name congyou -p 9501:9501 -it -v E:/docker/congyou-smart-elderly-care-admin:/var/www/"),e("strong",[a._v("congyou")]),a._v("  phpswoole/swoole:5.0")]),a._v(" "),e("h4",{attrs:{id:"成功安装一个官方镜像文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#成功安装一个官方镜像文件"}},[a._v("#")]),a._v(" 成功安装一个官方镜像文件")]),a._v(" "),e("p",[a._v("docker run  --name congyou -p 9501:9501 -it -v d:/congyou/codefile/congyou-smart-elderly-care-admin:/var/www/"),e("strong",[a._v("congyou")]),a._v(" hyperf/hyperf:8.2-alpine-v3.18-swoole")]),a._v(" "),e("h4",{attrs:{id:"我新项目mineadmin的启动脚本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#我新项目mineadmin的启动脚本"}},[a._v("#")]),a._v(" 我新项目mineadmin的启动脚本")]),a._v(" "),e("p",[a._v("docker run  --name my_mineadmin --restart=always -p 9509:9501 -it -v d:/congyou/dockerfile/mineadmin:/var/www/my_mineadmin hyperf/hyperf:8.1-alpine-v3.18-swoole-v5.1")]),a._v(" "),e("h4",{attrs:{id:"运行脚本后使用cmd命令行进入服务器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行脚本后使用cmd命令行进入服务器"}},[a._v("#")]),a._v(" 运行脚本后使用cmd命令行进入服务器")]),a._v(" "),e("h4",{attrs:{id:"查看当前运行的docker状态"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看当前运行的docker状态"}},[a._v("#")]),a._v(" 查看当前运行的docker状态")]),a._v(" "),e("p",[a._v("docker ps")]),a._v(" "),e("h4",{attrs:{id:"进入bash"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#进入bash"}},[a._v("#")]),a._v(" 进入bash")]),a._v(" "),e("p",[a._v("docker exec -it my_mineadmin /bin/bash")]),a._v(" "),e("h4",{attrs:{id:"进入容器目录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#进入容器目录"}},[a._v("#")]),a._v(" 进入容器目录")]),a._v(" "),e("p",[a._v("cd var/www/my_mineadmin")]),a._v(" "),e("h4",{attrs:{id:"启动服务器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动服务器"}},[a._v("#")]),a._v(" 启动服务器")]),a._v(" "),e("p",[a._v("php bin/hyperf.php start")]),a._v(" "),e("h4",{attrs:{id:"查看是否成功"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看是否成功"}},[a._v("#")]),a._v(" 查看是否成功")]),a._v(" "),e("p",[a._v("访问网页127.0.0.1:9509")]),a._v(" "),e("h4",{attrs:{id:"重装vender"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#重装vender"}},[a._v("#")]),a._v(" 重装vender")]),a._v(" "),e("p",[a._v("composer install -vvv")]),a._v(" "),e("h4",{attrs:{id:"数据表迁移"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据表迁移"}},[a._v("#")]),a._v(" 数据表迁移")]),a._v(" "),e("p",[a._v("php bin/hyperf.php migrate")]),a._v(" "),e("h4",{attrs:{id:"数据填充"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据填充"}},[a._v("#")]),a._v(" 数据填充")]),a._v(" "),e("p",[a._v("php bin/hyperf.php db:seed")]),a._v(" "),e("h2",{attrs:{id:"前端"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前端"}},[a._v("#")]),a._v(" 前端")]),a._v(" "),e("p",[a._v("使用npm安装前端服务")]),a._v(" "),e("h3",{attrs:{id:"前端依赖库的安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前端依赖库的安装"}},[a._v("#")]),a._v(" 前端依赖库的安装")]),a._v(" "),e("p",[a._v("pnpm i")]),a._v(" "),e("h3",{attrs:{id:"启动本地开发服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动本地开发服务"}},[a._v("#")]),a._v(" 启动本地开发服务")]),a._v(" "),e("p",[a._v("pnpm dev")]),a._v(" "),e("h2",{attrs:{id:"安装中的错误"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装中的错误"}},[a._v("#")]),a._v(" 安装中的错误")]),a._v(" "),e("p",[a._v("这个错误 1044 - Access denied for user 'ComplexUser123'@'%' to database 'mineadmin' 表示用户没有访问 mineadmin 数据库的权限")]),a._v(" "),e("h2",{attrs:{id:"解决办法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#解决办法"}},[a._v("#")]),a._v(" 解决办法")]),a._v(" "),e("p",[a._v("docker exec -it mysql_for_mineadmin mysql -u root -p")]),a._v(" "),e("p",[a._v("输入root密码 虽然看不见输入密码提示符,但是也要继续输入.")]),a._v(" "),e("p",[a._v("RootPass#8kLmP2@x")]),a._v(" "),e("p",[a._v("-- 创建数据库（如果不存在）\nCREATE DATABASE IF NOT EXISTS mineadmin;")]),a._v(" "),e("p",[a._v("-- 授予用户对数据库的所有权限\nGRANT ALL PRIVILEGES ON mineadmin.* TO 'ComplexUser123'@'%';")]),a._v(" "),e("p",[a._v("-- 刷新权限\nFLUSH PRIVILEGES;")]),a._v(" "),e("p",[a._v("-- 验证权限\nSHOW GRANTS FOR 'ComplexUser123'@'%';")]),a._v(" "),e("p",[a._v("刷新之后就有数据库访问权限了.")]),a._v(" "),e("p",[a._v("docker exec -it mysql_for_mineadmin mysql -u ComplexUser123 -p'G7h#9kLmP2@x'")]),a._v(" "),e("h2",{attrs:{id:"错误如果使用127-0-0-1会报一个错误"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#错误如果使用127-0-0-1会报一个错误"}},[a._v("#")]),a._v(" 错误如果使用127.0.0.1会报一个错误")]),a._v(" "),e("p",[a._v("Connection refused (SQL: select * from information_schema.tables where table_schema = 'minea dmin' and table_name = 'migrations')")]),a._v(" "),e("p",[a._v("解决办法:把127.0.0.1改为localhost")]),a._v(" "),e("h2",{attrs:{id:"如果使用localhost又会报另外一个错误"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如果使用localhost又会报另外一个错误"}},[a._v("#")]),a._v(" 如果使用localhost又会报另外一个错误")]),a._v(" "),e("p",[a._v("No such file or directory (SQL: select * from information_schema.tables where table_schema =\n'mineadmin' and table_name = 'migrations')")]),a._v(" "),e("p",[a._v("解决办法:把localhost改为docker容器中mysql的名字mysql_for_mineadmin")]),a._v(" "),e("h2",{attrs:{id:"出现新问题-dns-lookup-resolve-failed-sql-select-from-information-schema-tables-where-table-schema"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#出现新问题-dns-lookup-resolve-failed-sql-select-from-information-schema-tables-where-table-schema"}},[a._v("#")]),a._v(" 出现新问题:DNS Lookup resolve failed (SQL: select * from information_schema.tables where table_schema =")]),a._v(" "),e("p",[a._v("'mineadmin' and table_name = 'migrations')")]),a._v(" "),e("p",[a._v("是因为我不是使用的同一个dockerfile启动的网段不在一起.所以不能使用localhost也不能使用127.0.0.1,也不能使用mysql的容器名称")]),a._v(" "),e("p",[a._v("只能使用容器里面的ip")]),a._v(" "),e("p",[e("em",[a._v("docker inspect mysql_for_mineadmin | grep IPAddress")])]),a._v(" "),e("p",[a._v("通过这个命令查看,如果命令出错就取消后面的搜素")]),a._v(" "),e("p",[e("em",[a._v("docker inspect mysql_for_mineadmin")])]),a._v(" "),e("h2",{attrs:{id:"结局-因为没有把两个容器的网络连接在一起-导致hyperf的mysql无法连接到mysql"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#结局-因为没有把两个容器的网络连接在一起-导致hyperf的mysql无法连接到mysql"}},[a._v("#")]),a._v(" 结局:因为没有把两个容器的网络连接在一起,导致hyperf的mysql无法连接到mysql")])])}),[],!1,null,null,null);e.default=t.exports}}]);